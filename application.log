"2018-09-06 17:12:44 [main] INFO  com.comopt.touchpoint.Application - Starting Application on 8c85902eb11f.ant.amazon.com with PID 59686 (/Users/sajedp/work/learning/sample/target/classes started by sajedp in /Users/sajedp/work/learning/sample)
""2018-09-06 17:12:44 [main] INFO  com.comopt.touchpoint.Application - No active profile set, falling back to default profiles: default
""2018-09-06 17:12:44 [main] INFO  o.s.c.a.AnnotationConfigApplicationContext - Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@2ddc8ecb: startup date [Thu Sep 06 17:12:44 IST 2018]; root of context hierarchy
""2018-09-06 17:12:44 [main] INFO  o.s.b.f.s.DefaultListableBeanFactory - Overriding bean definition for bean 'jobLauncher' with a different definition: replacing [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration; factoryMethodName=jobLauncher; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/batch/core/configuration/annotation/SimpleBatchConfiguration.class]] with [Root bean: class [null]; scope=; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=batchConfiguration; factoryMethodName=jobLauncher; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [com/comopt/touchpoint/batch/BatchConfiguration.class]]
""2018-09-06 17:12:45 [main] INFO  o.s.b.c.l.support.SimpleJobLauncher - No TaskExecutor has been set, defaulting to synchronous executor.
""2018-09-06 17:12:45 [main] WARN  o.s.b.c.c.a.DefaultBatchConfigurer - No datasource was provided...using a Map based JobRepository
""2018-09-06 17:12:45 [main] INFO  o.s.b.c.l.support.SimpleJobLauncher - No TaskExecutor has been set, defaulting to synchronous executor.
""2018-09-06 17:12:45 [main] INFO  o.s.j.e.a.AnnotationMBeanExporter - Registering beans for JMX exposure on startup
""2018-09-06 17:12:45 [main] INFO  o.s.j.e.a.AnnotationMBeanExporter - Bean with name 'dataSource' has been autodetected for JMX exposure
""2018-09-06 17:12:45 [main] INFO  o.s.j.e.a.AnnotationMBeanExporter - Located MBean 'dataSource': registering with JMX server as MBean [com.zaxxer.hikari:name=dataSource,type=HikariDataSource]
""2018-09-06 17:12:45 [main] INFO  o.s.s.a.ScheduledAnnotationBeanPostProcessor - No TaskScheduler/ScheduledExecutorService bean found for scheduled processing
""2018-09-06 17:12:45 [main] INFO  com.comopt.touchpoint.Application - Started Application in 1.711 seconds (JVM running for 2.118)
""2018-09-06 17:12:45 [main] INFO  o.s.b.a.b.JobLauncherCommandLineRunner - Running default command line with: []
""2018-09-06 17:12:45 [pool-1-thread-1] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] launched with the following parameters: [{TPA batch JobID=1536234165632}]
""2018-09-06 17:12:45 [pool-1-thread-1] INFO  o.s.batch.core.job.SimpleStepHandler - Executing step: [chunkStep]
""2018-09-06 17:12:45 [pool-1-thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
""2018-09-06 17:12:45 [main] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] launched with the following parameters: [{run.id=1}]
""2018-09-06 17:12:45 [main] INFO  o.s.batch.core.job.SimpleStepHandler - Executing step: [chunkStep]
""2018-09-06 17:12:45 [pool-1-thread-1] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
""2018-09-06 17:12:45 [main] ERROR o.s.batch.core.step.AbstractStep - Encountered an error executing step chunkStep in job testJob
"org.springframework.dao.InvalidDataAccessResourceUsageException: Unexpected cursor position change.
	at org.springframework.batch.item.database.AbstractCursorItemReader.verifyCursorPosition(AbstractCursorItemReader.java:383)
	at org.springframework.batch.item.database.AbstractCursorItemReader.doRead(AbstractCursorItemReader.java:478)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.read(AbstractItemCountingItemStreamItemReader.java:89)
	at org.springframework.batch.core.step.item.SimpleChunkProvider.doRead(SimpleChunkProvider.java:91)
	at org.springframework.batch.core.step.item.SimpleChunkProvider.read(SimpleChunkProvider.java:157)
	at org.springframework.batch.core.step.item.SimpleChunkProvider$1.doInIteration(SimpleChunkProvider.java:116)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.item.SimpleChunkProvider.provide(SimpleChunkProvider.java:110)
	at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:69)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:406)
	at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:330)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:272)
	at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:81)
	at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:375)
	at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:215)
	at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:145)
	at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:257)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:200)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:148)
	at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:66)
	at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:67)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)
	at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:308)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:141)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:134)
	at org.springframework.boot.autoconfigure.batch.JobLauncherCommandLineRunner.execute(JobLauncherCommandLineRunner.java:163)
	at org.springframework.boot.autoconfigure.batch.JobLauncherCommandLineRunner.executeLocalJobs(JobLauncherCommandLineRunner.java:179)
	at org.springframework.boot.autoconfigure.batch.JobLauncherCommandLineRunner.launchJobFromProperties(JobLauncherCommandLineRunner.java:134)
	at org.springframework.boot.autoconfigure.batch.JobLauncherCommandLineRunner.run(JobLauncherCommandLineRunner.java:128)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:797)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:781)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1255)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1243)
	at com.comopt.touchpoint.Application.main(Application.java:13)
"2018-09-06 17:12:46 [main] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] completed with the following parameters: [{run.id=1}] and the following status: [FAILED]
""2018-09-06 17:12:46 [pool-1-thread-1] INFO  c.c.t.batch.CustomItemWriter - Touch Point JSON String [{"appId":"Testting2","transId":"2","etlBusinessRecordId":null,"sourceCd":null,"tenantId":0,"touchpoint":null}]
""2018-09-06 17:12:46 [pool-1-thread-1] ERROR o.s.batch.core.step.AbstractStep - Exception while closing step execution resources in step chunkStep in job testJob
"org.springframework.batch.item.ItemStreamException: Error while closing item reader
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.close(AbstractItemCountingItemStreamItemReader.java:138)
	at org.springframework.batch.item.support.CompositeItemStream.close(CompositeItemStream.java:89)
	at org.springframework.batch.core.step.tasklet.TaskletStep.close(TaskletStep.java:305)
	at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:271)
	at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:148)
	at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:66)
	at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:67)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:169)
	at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:144)
	at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:136)
	at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:308)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:141)
	at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50)
	at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:134)
	at com.comopt.touchpoint.batch.BatchConfiguration.perform(BatchConfiguration.java:155)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.scheduling.support.ScheduledMethodRunnable.run(ScheduledMethodRunnable.java:65)
	at org.springframework.scheduling.support.DelegatingErrorHandlingRunnable.run(DelegatingErrorHandlingRunnable.java:54)
	at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)
	at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:308)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:180)
	at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:294)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.sql.SQLException: Connection is closed
	at com.zaxxer.hikari.pool.ProxyConnection$ClosedConnection.lambda$getClosedConnection$0(ProxyConnection.java:490)
	at com.sun.proxy.$Proxy61.setAutoCommit(Unknown Source)
	at com.zaxxer.hikari.pool.ProxyConnection.setAutoCommit(ProxyConnection.java:395)
	at com.zaxxer.hikari.pool.HikariProxyConnection.setAutoCommit(HikariProxyConnection.java)
	at org.springframework.batch.item.database.AbstractCursorItemReader.doClose(AbstractCursorItemReader.java:400)
	at org.springframework.batch.item.support.AbstractItemCountingItemStreamItemReader.close(AbstractItemCountingItemStreamItemReader.java:135)
	... 27 common frames omitted
"2018-09-06 17:12:46 [pool-1-thread-1] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] completed with the following parameters: [{TPA batch JobID=1536234165632}] and the following status: [COMPLETED]
""2018-09-06 17:13:45 [pool-1-thread-1] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] launched with the following parameters: [{TPA batch JobID=1536234225631}]
""2018-09-06 17:13:45 [pool-1-thread-1] INFO  o.s.batch.core.job.SimpleStepHandler - Executing step: [chunkStep]
""2018-09-06 17:13:45 [pool-1-thread-1] INFO  c.c.t.batch.CustomItemWriter - Touch Point JSON String [{"appId":"Testing","transId":"1","etlBusinessRecordId":null,"sourceCd":null,"tenantId":0,"touchpoint":null},{"appId":"Testting2","transId":"2","etlBusinessRecordId":null,"sourceCd":null,"tenantId":0,"touchpoint":null}]
""2018-09-06 17:13:45 [pool-1-thread-1] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] completed with the following parameters: [{TPA batch JobID=1536234225631}] and the following status: [COMPLETED]
""2018-09-06 17:14:45 [pool-1-thread-1] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] launched with the following parameters: [{TPA batch JobID=1536234285631}]
""2018-09-06 17:14:45 [pool-1-thread-1] INFO  o.s.batch.core.job.SimpleStepHandler - Executing step: [chunkStep]
""2018-09-06 17:14:45 [pool-1-thread-1] INFO  c.c.t.batch.CustomItemWriter - Touch Point JSON String [{"appId":"Testing","transId":"1","etlBusinessRecordId":null,"sourceCd":null,"tenantId":0,"touchpoint":null},{"appId":"Testting2","transId":"2","etlBusinessRecordId":null,"sourceCd":null,"tenantId":0,"touchpoint":null}]
""2018-09-06 17:14:45 [pool-1-thread-1] INFO  o.s.b.c.l.support.SimpleJobLauncher - Job: [FlowJob: [name=testJob]] completed with the following parameters: [{TPA batch JobID=1536234285631}] and the following status: [COMPLETED]
""2018-09-06 17:15:44 [Thread-2] INFO  o.s.c.a.AnnotationConfigApplicationContext - Closing org.springframework.context.annotation.AnnotationConfigApplicationContext@2ddc8ecb: startup date [Thu Sep 06 17:12:44 IST 2018]; root of context hierarchy
""2018-09-06 17:15:44 [Thread-2] INFO  o.s.j.e.a.AnnotationMBeanExporter - Unregistering JMX-exposed beans on shutdown
""2018-09-06 17:15:44 [Thread-2] INFO  o.s.j.e.a.AnnotationMBeanExporter - Unregistering JMX-exposed beans
""2018-09-06 17:15:44 [Thread-2] WARN  o.s.b.f.s.DisposableBeanAdapter - Invocation of destroy method 'close' failed on bean with name 'reader': org.springframework.batch.item.ItemStreamException: Error while closing item reader
""2018-09-06 17:15:44 [Thread-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
""2018-09-06 17:15:44 [Thread-2] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
"